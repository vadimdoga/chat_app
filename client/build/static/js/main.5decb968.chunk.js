(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},103:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(43),o=n.n(c),i=(n(51),n(52),n(5)),r=n(6),l=n(8),m=n(7),u=n(2),d=n(9),h=(n(53),n(19)),p=n.n(h),f=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).encode=function(e){var t=e.split("").map((function(e){return e.charCodeAt()})).join("");return p()(t)},n.encrypt=function(e,t,n){return p()(e).modPow(n,t)},n.state={msg:"",publicObject:Object},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.sendToServer=n.sendToServer.bind(Object(u.a)(n)),n.handleKey=n.handleKey.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){this.setState({msg:e.target.value})}},{key:"handleKey",value:function(){this.props.socket.emit("typing",!0)}},{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("publicKey",(function(t){e.setState({publicObject:t})}))}},{key:"sendToServer",value:function(e){if(e.preventDefault(),""!==this.state.msg){var t=this.encode(this.state.msg),n=Object.values(this.state.publicObject)[0],a=Object.values(this.state.publicObject)[1];console.log("Encoded Message: "+t),console.log("Public Key: "+n),console.log("Public Exponent: "+a);var s=this.encrypt(t,n,a);console.log("Encrypted message: "+s),this.props.socket.emit("msg",s),this.setState({msg:""})}}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.sendToServer},s.a.createElement("input",{className:"input-text",type:"text",name:"input",value:this.state.msg,onChange:this.handleChange,onKeyPress:this.handleKey}),s.a.createElement("input",{className:"input-submit",type:"submit",value:"Send"})))}}]),t}(a.Component),b=n(20),g=n(44),v=n.n(g),y=(n(71),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).scrollToBottom=function(){n.messagesEnd.scrollIntoView()},n.state={messages:[],msgData:[],senderName:"",connectedUsers:0,typing:!1,typingName:[]},n.props.socket.on("received",(function(e){n.setState((function(t){return{msgData:[].concat(Object(b.a)(t.msgData),[e])}}))})),n.props.socket.on("sendName",(function(e){n.setState({senderName:e})})),n.props.socket.on("connectedUsers",(function(e){n.setState({connectedUsers:e})})),n.props.socket.on("typingTrue",(function(e){n.setState({typing:!0}),n.state.typingName.includes(e)||n.setState((function(t){return{typingName:[].concat(Object(b.a)(t.typingName),[e])}})),setTimeout((function(){n.setState({typing:!1})}),3e3)})),n.scrollToBottom=n.scrollToBottom.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.scrollToBottom(),v.a.get("http://192.168.0.3:8080/chats").then((function(t){var n=t.data;e.setState({messages:n})}))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:"chat-box"},s.a.createElement("div",{className:"chat-header"},s.a.createElement("p",{className:"name"},"Chat App"),s.a.createElement("p",{className:"connected"},"Connected: ",this.state.connectedUsers)),this.state.messages.map((function(t){return s.a.createElement("div",{className:e.state.senderName===t.sender?"flex-container-true":"flex-container-false",key:t._id},s.a.createElement("li",{className:e.state.senderName===t.sender?"chat-text-true":"chat-text-false"},t.message),s.a.createElement("span",{className:e.state.senderName===t.sender?"sender-hide":"sender"},t.sender))})),this.state.msgData.map((function(t,n){return s.a.createElement("div",{className:e.state.senderName===t.sender?"flex-container-true":"flex-container-false",key:n},s.a.createElement("li",{className:e.state.senderName===t.sender?"chat-text-true":"chat-text-false"},t.message),s.a.createElement("span",{className:e.state.senderName===t.sender?"sender-hide":"sender"},t.sender))})),this.state.typing?this.state.typingName.map((function(e){return s.a.createElement("div",null,s.a.createElement("p",{className:"sender"},e),s.a.createElement("span",{className:"dot"}),s.a.createElement("span",{className:"dot"}),s.a.createElement("span",{className:"dot"}))})):this.state.typingName.splice(this.state.typingName.indexOf(0)),s.a.createElement("div",{ref:function(t){e.messagesEnd=t}}))}}]),t}(a.Component)),E=(n(72),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={name:"",connectedUsers:!1},n.handelSubmit=n.handelSubmit.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"handelSubmit",value:function(e){var t=this;e.preventDefault(),this.props.socket.emit("userData",this.state.name),this.props.socket.on("availableNickname",(function(e){e?document.getElementsByClassName("modal")[0].style.display="none":t.setState({name:"This name is already used"})}))}},{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("form",{onSubmit:this.handelSubmit},s.a.createElement("h1",null,"What is your name?"),s.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),s.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(s.a.Component)),N=n(45),j=n.n(N).a.connect("http://192.168.0.3:8080");var O=function(){return s.a.createElement("div",null,s.a.createElement(E,{socket:j}),s.a.createElement(y,{socket:j}),s.a.createElement(f,{socket:j}))};var k=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},46:function(e,t,n){e.exports=n(103)},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){}},[[46,1,2]]]);
//# sourceMappingURL=main.5decb968.chunk.js.map